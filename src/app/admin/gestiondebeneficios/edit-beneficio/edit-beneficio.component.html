<div class="container mt-5">
  <h2 class="mb-4">Editar Beneficio</h2>

  <form [formGroup]="beneficioForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="nombre">Nombre del Beneficio</label>
      <input id="nombre" formControlName="nombre" type="text" class="form-control">
    </div>
    
    <div class="form-group">
      <label for="descripcion">Descripción</label>
      <editor id="descripcion" formControlName="descripcion" [init]="editorConfig" class="form-control"></editor>
    </div>

    <div class="form-group">
      <label for="tipo_usuario">Tipo de Usuario</label>
      <select id="tipo_usuario" formControlName="tipo_usuario" class="form-control">
        <option value="Gestante">Gestante</option>
        <option value="NN">NN (Niño Nacido)</option>
      </select>
    </div>

    <div class="form-group">
      <label for="etapa_id">Etapa</label>
      <select id="etapa_id" formControlName="etapa_id" class="form-control">
        <option *ngFor="let etapa of etapas" [value]="etapa.id">{{ etapa.nombre }}</option>
      </select>
    </div>

    <div class="form-group">
      <label for="tipo_beneficio">Tipo de Beneficio</label>
      <select id="tipo_beneficio" formControlName="tipo_beneficio" class="form-control">
        <option value="Salud">Salud</option>
        <option value="OLN">OLN</option>
        <option value="PARN">PARN</option>
        <option value="MADIS">MADIS</option>
        <option value="Sala Cuna">Sala Cuna</option>
        <option value="Educacion">Educación</option>
        <option value="Municipal">Municipal</option>
        <option value="Otro">Otro</option>
      </select>
    </div>

    <div class="form-group">
      <label for="region_id">Región</label>
      <ng-multiselect-dropdown 
        [settings]="dropdownSettingsRegion" 
        [data]="regiones" 
        formControlName="region_id"
        (onSelect)="cargarComunas()" 
        (onDeSelect)="cargarComunas()" 
        (onSelectAll)="cargarComunas()" 
        (onDeSelectAll)="cargarComunas()">
      </ng-multiselect-dropdown>
    </div>
    
    <div class="form-group">
      <label for="comuna_id">Comuna</label>
      <ng-multiselect-dropdown 
        [settings]="dropdownSettingsComuna" 
        [data]="comunas" 
        formControlName="comuna_id"
        (onSelect)="cargarUbicaciones()" 
        (onDeSelect)="cargarUbicaciones()" 
        (onSelectAll)="cargarUbicaciones()" 
        (onDeSelectAll)="cargarUbicaciones()">
      </ng-multiselect-dropdown>
    </div>
    
    <div class="form-group">
      <label for="ubicacion_id">Ubicación</label>
      <ng-multiselect-dropdown 
        [settings]="dropdownSettingsUbicacion" 
        [data]="filteredUbicaciones" 
        formControlName="ubicacion_id">
      </ng-multiselect-dropdown>
    </div>

    <div class="form-group">
      <label for="requisitos">Requisitos</label>
      <editor id="requisitos" formControlName="requisitos" [init]="editorConfig" class="form-control"></editor>
    </div>

    <div class="form-group">
      <label for="imagen">Imagen</label>
      <input id="imagen" type="file" (change)="onFileChange($event)" class="form-control">
    </div>

    <div class="form-group">
      <label for="vigencia">Vigencia</label>
      <input id="vigencia" formControlName="vigencia" type="date" class="form-control">
    </div>

    <button type="submit" class="btn btn-primary">Guardar</button>
    <button (click)="goBack()" type="button" class="btn btn-secondary ml-2">Volver</button>
  </form>
</div>
